<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://kuleuven-micas.github.io/stream/workload/ rel=canonical><link href=../user-guide/ rel=prev><link href=../hardware/ rel=next><link rel=icon href=../images/stream-logo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.15"><title>Workload - Stream</title><link rel=stylesheet href=../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=lime> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#workload class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Stream class="md-header__button md-logo" aria-label=Stream data-md-component=logo> <img src=../images/stream-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Stream </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Workload </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=lime aria-hidden=true type=radio name=__palette id=__palette_0> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/KULeuven-MICAS/stream title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> KULeuven-MICAS/stream </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Stream class="md-nav__button md-logo" aria-label=Stream data-md-component=logo> <img src=../images/stream-logo.svg alt=logo> </a> Stream </label> <div class=md-nav__source> <a href=https://github.com/KULeuven-MICAS/stream title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> KULeuven-MICAS/stream </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../user-guide/ class=md-nav__link> <span class=md-ellipsis> User Guide </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Workload </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Workload </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#onnx-models class=md-nav__link> <span class=md-ellipsis> ONNX models </span> </a> <nav class=md-nav aria-label="ONNX models"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#supported-operators class=md-nav__link> <span class=md-ellipsis> Supported operators </span> </a> </li> <li class=md-nav__item> <a href=#saving-weights-as-external-data class=md-nav__link> <span class=md-ellipsis> Saving weights as external data </span> </a> </li> <li class=md-nav__item> <a href=#shape-inference class=md-nav__link> <span class=md-ellipsis> Shape inference </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#manual-layer-definition class=md-nav__link> <span class=md-ellipsis> Manual layer definition </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../hardware/ class=md-nav__link> <span class=md-ellipsis> Hardware </span> </a> </li> <li class=md-nav__item> <a href=../mapping/ class=md-nav__link> <span class=md-ellipsis> Mapping </span> </a> </li> <li class=md-nav__item> <a href=../stages/ class=md-nav__link> <span class=md-ellipsis> Stages </span> </a> </li> <li class=md-nav__item> <a href=../outputs/ class=md-nav__link> <span class=md-ellipsis> Outputs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../future/ class=md-nav__link> <span class=md-ellipsis> Future Plans </span> </a> </li> <li class=md-nav__item> <a href=../contribute/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../publications/ class=md-nav__link> <span class=md-ellipsis> Publications </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=workload>Workload<a class=headerlink href=#workload title="Permanent link">&para;</a></h1> <p>The recommended way of defining an algorithmic workload is through an onnx model. An onnx model can contain multiple operator types, which in the context of ML are often referred to as layers, some of which are automatically recognised and parsed by Stream. Alternatively, the layers can be manually defined for more customization.</p> <p>Stream handles workloads in a similar way than the <a href=https://kuleuven-micas.github.io/zigzag/workload.html>original ZigZag project</a>. Additionally, Stream supports more onxx operators, but it also requires slightly different layer attributes in the manual layer definition.</p> <h2 id=onnx-models>ONNX models<a class=headerlink href=#onnx-models title="Permanent link">&para;</a></h2> <h3 id=supported-operators>Supported operators<a class=headerlink href=#supported-operators title="Permanent link">&para;</a></h3> <p>A complete list of all onnx operators can be found <a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md>here</a>.</p> <p>Following operators are supported by Stream and will automatically be parsed into <code>LayerNode</code> objects when using your onnx model within the framework:</p> <ul> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#Conv>Conv</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#QLinearConv>QLinearConv</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#MatMul>MatMul</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#Gemm>Gemm</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#MaxPool>MaxPool</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#AveragePool>AveragePool</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#GlobalMaxPool>GlobalMaxPool</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#GlobalAveragePool>GlobalAveragePool</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#Reshape>Reshape</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#Flatten>Flatten</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#Add>Add</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#Mul>Mul</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#Transpose>Transpose</a></li> <li><a href=https://github.com/onnx/onnx/blob/main/docs/Operators.md#LpNormalization>LpNormalization</a></li> </ul> <p>All other operators will be parsed into a <code>DummyNode</code> object, which is assumed to not be accelerateable, incurring 0 hardware cost. If you have an onnx operator you would like to see supported, feel free to <a href=https://github.com/KULeuven-MICAS/stream/issues/new>open an issue</a> or manually add it yourself in the <a href=https://github.com/KULeuven-MICAS/stream/blob/master/stream/parser/onnx/model.py>ONNXModelParserStage</a> taking into account the <a href=../contribute/ >Contributing Guidelines</a>.</p> <h3 id=saving-weights-as-external-data>Saving weights as external data<a class=headerlink href=#saving-weights-as-external-data title="Permanent link">&para;</a></h3> <p>If your onnx model is rather large, and you want to avoid having it inside of your Stream repo, you can save it with external data, which saves the weights as an external file, which can be discarded as Stream doesn't require the weight values. You can do so as follows:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>onnx</span>
<span class=n>model</span> <span class=o>=</span> <span class=n>onnx</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s1>&#39;my_model_with_internal_data.onnx&#39;</span><span class=p>)</span>
<span class=n>onnx</span><span class=o>.</span><span class=n>save_model</span><span class=p>(</span>
    <span class=n>model</span><span class=p>,</span>
    <span class=s1>&#39;my_model_with_external_data.onnx&#39;</span><span class=p>,</span>
    <span class=n>save_as_external_data</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>all_tensors_to_one_file</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>location</span><span class=o>=</span><span class=s1>&#39;external_data.data&#39;</span><span class=p>,</span>
    <span class=n>size_threshold</span><span class=o>=</span><span class=mi>1024</span><span class=p>,</span>
    <span class=n>convert_attribute</span><span class=o>=</span><span class=kc>False</span>
<span class=p>)</span>
<span class=c1># Optional: Remove the &#39;external_data_filename&#39; file if you don&#39;t need the data</span>
<span class=c1># When loading model, add extra flag as follows:</span>
<span class=n>model</span> <span class=o>=</span> <span class=n>onnx</span><span class=o>.</span><span class=n>load_model</span><span class=p>(</span><span class=s1>&#39;my_model_with_internal_data.onnx&#39;</span><span class=p>,</span> <span class=n>load_external_data</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div> <h3 id=shape-inference>Shape inference<a class=headerlink href=#shape-inference title="Permanent link">&para;</a></h3> <p>Stream requires an inferred onnx model, as it needs to know the shapes of all intermediate tensors to correctly infer the layer shapes. If you have an onnx model that is not shape inferred, you can do so by the following commands:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>onnx</span>
<span class=kn>from</span><span class=w> </span><span class=nn>onnx</span><span class=w> </span><span class=kn>import</span> <span class=n>shape_inference</span>
<span class=n>model</span> <span class=o>=</span> <span class=n>onnx</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&quot;my_model.onnx&quot;</span><span class=p>)</span>
<span class=n>inferred_model</span> <span class=o>=</span> <span class=n>shape_inference</span><span class=o>.</span><span class=n>infer_shapes</span><span class=p>(</span><span class=n>model</span><span class=p>)</span>
<span class=n>onnx</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>inferred_model</span><span class=p>,</span> <span class=s2>&quot;my_inferred_model.onnx&quot;</span><span class=p>)</span>
</code></pre></div> <h2 id=manual-layer-definition>Manual layer definition<a class=headerlink href=#manual-layer-definition title="Permanent link">&para;</a></h2> <p>It is also possible to manually define your own workload layers. In that case there the <code>main.py</code> file should be executed instead of <code>main_onnx.py</code>. Moreover, the workload file should be provided as input together with the accelerator, thus there is no onnx model and mapping file loaded. The mapping information is inserted for each layer alongside the layer shape definition, identically to how it was defined in the mapping file.</p> <p>Each layer definition is represented as a dict which should have the following attributes:</p> <ul> <li><strong>operator_type</strong>: Specification of the layer operator type (e.g. <code>Conv</code>, <code>MaxPool</code>).</li> <li><strong>equation</strong>: The operational equation for this layer. The dimensions should be small letters, where as the operands are large letters. 'O' should always be used for the output operand, the input operands can be named freely.</li> <li><strong>dimension_relations</strong>: The relationship between different dimensions present in the equation. This is often used in convolutional layers, where there is a relationship between the spatial input indices and the spatial output indices through the stride and with the filter indices through the dilation rate.</li> <li><strong>loop_dim_size</strong>: The size of the different dimensions present in the equation. Dimensions defined (i.e. on the left hand side) in the dimension_relations are not to be provided and are inferred automatically.</li> <li><strong>operand_precision</strong>: The bit precision of the different operands present in the equation. 'O' should always be used, which represents the partial output precision. 'O_final' represents the final output precision.</li> <li><strong>operand_source</strong>: The layer id the input operands of this layer come from. This is important to correctly build the NN graph edges.</li> <li><strong>memory_operand_links</strong>: The link between the virtual memory operands and the actual algorithmic operands. For more information, read the hardware readme.</li> <li><strong>padding</strong>: Padding for each dimension (i.e. IX and IY). The first value is the left or upper padding, the second value is the right or lower padding for IX resp. IY</li> </ul> <p>The following loop notation has to be used to describe a layer of the workload (see loop notation in <a href=https://ieeexplore.ieee.org/document/9360462>this paper</a>):</p> <ul> <li><strong>B</strong>: Batch size</li> <li><strong>K</strong>: Output channels</li> <li><strong>C</strong>: Input channels</li> <li><strong>OY</strong>: Output rows</li> <li><strong>OX</strong>: Output columns</li> <li><strong>FY</strong>: Kernel rows</li> <li><strong>FX</strong>: Kernel columns</li> </ul> <p>An <strong>example of this manual layer defintion</strong> can be found at: <a href=https://github.com/KULeuven-MICAS/stream/blob/master/stream/inputs/examples/workload/resnet18.yaml>inputs/examples/workloads/resnet18.yaml</a>.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="July 5, 2025 14:06:09 UTC">July 5, 2025</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/KULeuven-MICAS/stream target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.sections", "navigation.expand", "toc.integrate", "content.code.copy", "search.suggest", "search.highlight", "header.autohide"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../assets/javascripts/bundle.56ea9cef.min.js></script> </body> </html>